{% extends "base.html" %}
{% block title %}Feature â€” Track My Journey{% endblock %}

{% block content %}

<!-- ==========================================
     HERO SECTION (neon image)
     ========================================== -->
<section class="hero hero-feature">
  <div class="hero-text">
    <h1>See your learning journey at a glance</h1>
    <p>
      TMJ shows your course progress with clear, glowing dashboards so you always know whatâ€™s next.
    </p>
  </div>

  <div class="hero-media">
    <img src="{{ url_for('static', filename='img/feature-hero.png') }}"
         alt="Futuristic dashboard showing course progress cards"
         class="feature-hero-image">
  </div>
</section>


<!-- ==========================================
     PROGRESS DEMO (NOW DYNAMIC FOR ALL COURSES)
     ========================================== -->

<h1>Progress Demo</h1>
<p>This page shows a sample layout for tracking progress across modules.</p>

<!-- Show streak once -->
{% if streak_days %}
  <p class="streak-text">
    ðŸ”¥ Current streak: {{ streak_days }} day{% if streak_days != 1 %}s{% endif %} in a row.
  </p>
{% endif %}

<!-- Show reminder once -->
{% if reminder_message %}
  <div class="reminder-banner">
    {{ reminder_message }}
  </div>
{% endif %}

<!-- Show courses -->
{% if course_cards %}
  {% for card in course_cards %}

    {# ------------------------------------------
       Pick a color for this course
       ------------------------------------------ #}
    {% set color = '#7C3AED' %} {# default purple #}

    {% if card.course.title == 'Study Skills & Habits' %}
      {% set color = '#2563EB' %} {# blue #}
    {% elif card.course.title == 'Time Management Essentials' %}
      {% set color = '#DC2626' %} {# red #}
    {% elif card.course.title == 'Effective Note-Taking' %}
      {% set color = '#16A34A' %} {# green #}
    {% elif card.course.title == 'Mindfulness for Students' %}
      {% set color = '#CA8A04' %} {# yellow/gold #}
    {% endif %}

    <div class="course-progress-card" style="border-left: 6px solid {{ color }};">

      <!-- Course title + progress -->
      <div class="progress-header">
        <span>{{ card.course.title }}</span>
        <span>{{ card.progress_percent }}%</span>
      </div>

      <div class="progress-bar">
        <div class="progress-fill"
             style="width: {{ card.progress_percent }}%; background: {{ color }};">
        </div>
      </div>

      <!-- Modules list -->
      <div class="progress-list">
        {% for m in card.modules %}
          <div class="progress-item">
            <div class="progress-header">
              <span>{{ m.module_name }}</span>
              <span>{{ m.percent_complete }}%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill"
                   style="width: {{ m.percent_complete }}%; background: {{ color }};">
              </div>
            </div>
          </div>
        {% else %}
          <p>No module progress yet for this course.</p>
        {% endfor %}
      </div>

      <!-- Link to course detail page (badge + notes) -->
      <a href="{{ url_for('main.course_detail', course_id=card.course.id) }}"
         class="btn-primary"
         style="margin-top: 0.75rem; display: inline-block;">
        View course detail
      </a>

    </div>
  {% endfor %}

{% else %}
  <p>No courses found yet. Add a course to start tracking progress.</p>
{% endif %}

{% endblock %}
