{% extends "base.html" %}

{% block title %}Course Detail â€” TMJ{% endblock %}

{% block content %}

{# 
  Provide safe defaults so the page can render even if
  backend doesn't pass real data yet (helpful for M2 demo).
#}
{% set course_name = course_name or "Intro to Python" %}
{% set status = status or "completed" %}
{% set status_label = status_label or "Completed" %}
{% set progress_percent = progress_percent or 100 %}
{% set completion_date = completion_date or "Nov 26, 2025" %}

<section class="course-page">

  <!-- HEADER: title + status + thumbnail -->
  <header class="course-header">
    <div class="course-header-main">
      <h1 class="course-title">{{ course_name }}</h1>
      <span class="course-status course-status-{{ status }}">
        {{ status_label }}
      </span>
    </div>

    <div class="course-header-media">
      <img src="{{ url_for('static', filename='img/course-python.png') }}"
           alt="Intro to Python course thumbnail"
           class="course-thumbnail">
    </div>
  </header>

  <!-- OVERALL COURSE PROGRESS BAR -->
  <section class="course-section">
    <h2>Course progress</h2>
    <p>You have completed {{ progress_percent }}% of this course.</p>

    <div class="progress-bar course-progress-bar">
      <div class="progress-fill" style="width: {{ progress_percent }}%;"></div>
    </div>
  </section>

  <!-- MODULE LIST (fake data for now if none passed) -->
  {% set modules = modules or [
    {"name": "Module 1: Getting Started", "progress": 100},
    {"name": "Module 2: Data Types & Variables", "progress": 80},
    {"name": "Module 3: Control Flow", "progress": 40}
  ] %}

  <section class="course-section">
    <h2>Modules in this course</h2>

    <ul class="course-module-list">
      {% for module in modules %}
        <li class="course-module-item">
          <div class="course-module-header">
            <span>{{ module.name }}</span>
            <span>{{ module.progress }}%</span>
          </div>
          <div class="progress-bar module-progress-bar">
            <div class="progress-fill" style="width: {{ module.progress }}%;"></div>
          </div>
        </li>
      {% endfor %}
    </ul>
  </section>

  <!-- COMPLETION BADGE (only when done) -->
  {% if status == "completed" or progress_percent == 100 %}
  <section class="course-section course-section-completed-banner">
    <div class="completed-banner">
      <div class="completed-text">
        <h2>ðŸŽ‰ Course completed!</h2>
        <p>You finished this course on {{ completion_date }}.</p>
      </div>
      <div class="completed-badge">
        <img src="{{ url_for('static', filename='img/Completion Badge.png') }}"
             alt="Completion badge"
             class="completion-badge-image">
      </div>
    </div>
  </section>
  {% endif %}

</section>

{% endblock %}
